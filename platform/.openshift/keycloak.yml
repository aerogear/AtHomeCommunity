---

    apiVersion: template.openshift.io/v1
    kind: Template
    labels:
      template: open-volunteer-platform-keycloak
    metadata:
      name: open-volunteer-platform-keycloak
      annotations:
        openshift.io/display-name: Keycloak
        description: |-
          Template for Keycloak
        tags: graphback, graphql,keycloak,  nodejs
        iconClass: icon-nodejs
        openshift.io/provider-display-name: Red Hat, Inc.
        openshift.io/documentation-url: https://access.redhat.com/documentation/en-us/red_hat_managed_integration/1/html-single/developing_a_data_sync_app/index
        openshift.io/support-url: https://access.redhat.com
        template.openshift.io/bindable: 'false'
        aerogear.org/datasync-template-version: '0.9.3'
    objects:  
    - apiVersion: v1
      kind: DeploymentConfig
      metadata:
        labels:
          app: open-volunteer-platform
        annotations:
          template.alpha.openshift.io/wait-for-ready: 'true'
        name: keycloak
      spec:
        replicas: 1
        selector:
          name: keycloak
        strategy:
          type: Recreate
        template:
          metadata:
            labels:
              name: keycloak
          spec:
            containers:
            - capabilities: {}
              env:
              - name: DB_VENDOR
                value: h2
              - name: KEYCLOAK_USER
                value: ovp-admin
              - name: KEYCLOAK_PASSWORD
                value: ovp-admin
              image: quay.io/keycloak/keycloak:9.0.3
              imagePullPolicy: IfNotPresent
              name: keycloak
              ports:
              - containerPort: 8080
                protocol: TCP
              securityContext:
                capabilities: 
                  runAsUser: 1000
                  runAsGroup: 3000
                  fsGroup: 2000  
                privileged: false
            dnsPolicy: ClusterFirst
            restartPolicy: Always
        triggers:
        - type: ConfigChange
      status: {}
     
    - apiVersion: v1
      kind: Service
      metadata:
        labels:
          app: open-volunteer-platform
        name: keycloak
      spec:
        ports:
        - name: keycloak
          port: 8080
          protocol: TCP
          targetPort: 8080
        selector:
          name: keycloak
        sessionAffinity: None
        type: ClusterIP
      status:
        loadBalancer: {}  

    - apiVersion: v1
      kind: Route
      metadata:
        labels:
          app: open-volunteer-platform
        name: keycloak
      spec:
        host: ""
        to:
          kind: Service
          name: keycloak
        tls:
          termination: edge
          insecureEdgeTerminationPolicy: Allow