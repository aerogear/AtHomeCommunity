(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{126:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return b}));var a=t(0),o=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var d=o.a.createContext({}),m=function(e){var n=o.a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):l({},n,{},e)),t},s=function(e){var n=m(e.components);return o.a.createElement(d.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},u=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),s=m(t),u=a,b=s["".concat(r,".").concat(u)]||s[u]||p[u]||i;return t?o.a.createElement(b,l({ref:n},d,{components:t})):o.a.createElement(b,l({ref:n},d))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,r=new Array(i);r[0]=u;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var d=2;d<i;d++)r[d]=t[d];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},98:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return r})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return m}));var a=t(1),o=t(6),i=(t(0),t(126)),r={id:"adding-and-customizing-forms",title:"Out of the box Form"},l={id:"adding-and-customizing-forms",title:"Out of the box Form",description:"# 1. Introduction",source:"@site/../docs/forms.md",permalink:"/docs/adding-and-customizing-forms",editUrl:"https://github.com/aerogear/OpenVolunteerPlatform/edit/master/website/../docs/forms.md",sidebar:"docs",previous:{title:"AMQ Live updates",permalink:"/docs/liveupdates"},next:{title:"CLI commands",permalink:"/docs/client"}},c=[{value:"Adding additional information",id:"adding-additional-information",children:[]},{value:"Removing a field",id:"removing-a-field",children:[]},{value:"Adding validation to postcode field",id:"adding-validation-to-postcode-field",children:[]},{value:"3. Adding a new form",id:"3-adding-a-new-form",children:[{value:"Start by defining the schema.",id:"start-by-defining-the-schema",children:[]},{value:"Let&#39;s use it in a component!",id:"lets-use-it-in-a-component",children:[]}]}],d={rightToc:c};function m(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},d,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"1-introduction"},"1. Introduction"),Object(i.b)("p",null,"Open Volunteer uses ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/uniforms"}),Object(i.b)("inlineCode",{parentName:"a"},"uniforms"))," and ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/uniforms-ionic"}),Object(i.b)("inlineCode",{parentName:"a"},"uniforms-ionic"))," packages to create html forms with built-in state management and validation with minimum code.\nYou usually would not have to install any of these libraries since the reference implementation comes with them already. "),Object(i.b)("p",null,"Thanks to this integration, Open Volunteer Platform provides you with simple re-usable form components which allows for rapid prototyping and cleaner React components. This source code for the forms is located in ",Object(i.b)("inlineCode",{parentName:"p"},"client/src/forms")," and ",Object(i.b)("inlineCode",{parentName:"p"},"client-admin/src/forms")),Object(i.b)("h1",{id:"2-modifying-an-existing-form"},"2. Modifying an existing form"),Object(i.b)("p",null,"In this section we'll see how to add additional information, add validation, or remove information from an existing form.\nTo do so, we'll use the ",Object(i.b)("inlineCode",{parentName:"p"},"client/src/forms/volunteer.ts")," schema which looks like below. "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"import SimpleSchema from '../config/SimpleSchema';\nimport SimpleSchema2Bridge from 'uniforms-bridge-simple-schema-2';\n\nconst volunteerForm = new SimpleSchema({\n    firstName: {\n        type: String,\n        max: 120,\n        uniforms: {\n            readonly: true\n        }\n    },\n    lastName: {\n        type: String,\n        max: 120,\n        uniforms: {\n            readonly: true\n        }\n    },\n    email: {\n        type: String,\n        max: 220,\n        uniforms: {\n            readonly: true,\n            type: 'email'\n        }\n    },\n    username: {\n        type: String,\n        max: 220,\n        uniforms: {\n            readonly: true\n        }\n    },\n    address1: {\n        type: String,\n        max: 400\n    },\n    address2: {\n        type: String,\n        required: false,\n        max: 400\n    },\n    city: {\n        type: String,\n        max: 100\n    },\n    postcode: {\n        type: Number,\n        required: false,\n    },\n    dateOfBirth: {\n        type: Date,\n        required: false,\n        uniforms: {\n            label: \"Date Of Birth\"\n        },\n    },\n    canDeliver: {\n        type: Boolean,\n        uniforms: {\n            label: \"I volunteer to do delivery to recipients\",\n            defaultValue: false\n        }\n    }\n} as any);\n\nexport default new SimpleSchema2Bridge(volunteerForm);\n")),Object(i.b)("h3",{id:"adding-additional-information"},"Adding additional information"),Object(i.b)("p",null,"Adding additional information to display canbe achieved by only adding the field name and type of the model in question.\nE.g if we want to allow volunteers to change their ",Object(i.b)("inlineCode",{parentName:"p"},"active")," status we could add the field as follows "),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),'{\n    active: {\n        type: Boolean,\n        uniforms: {\n            label: "Active",\n            defaultValue: true\n        }\n    }\n}\n')),Object(i.b)("h3",{id:"removing-a-field"},"Removing a field"),Object(i.b)("p",null,"This can be achieved by deleting the field from the form definition object. "),Object(i.b)("h3",{id:"adding-validation-to-postcode-field"},"Adding validation to postcode field"),Object(i.b)("p",null,"Let's asssume that we want our volunteer's postcodes can be between ",Object(i.b)("inlineCode",{parentName:"p"},"1000-9999"),", we can add this sort of validation using the min/max boundaries"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"{\n    postcode: {\n        type: Number,\n        required: false,\n        max: 9999,\n        min: 1000\n    }\n}\n")),Object(i.b)("h2",{id:"3-adding-a-new-form"},"3. Adding a new form"),Object(i.b)("p",null,"The process of adding a new custom form requires two steps. "),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Defining the schema"),Object(i.b)("li",{parentName:"ol"},"Using the schema in a React Component ")),Object(i.b)("p",null,"Let's take a look at an example by trying to add a form to display product full details in the ",Object(i.b)("inlineCode",{parentName:"p"},"client")," application."),Object(i.b)("h3",{id:"start-by-defining-the-schema"},"Start by defining the schema."),Object(i.b)("p",null,"In the ",Object(i.b)("inlineCode",{parentName:"p"},"client/src/forms/product.ts")," file, let's define the following schema."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"import SimpleSchema from '../config/SimpleSchema';\nimport SimpleSchema2Bridge from 'uniforms-bridge-simple-schema-2';\n\nconst productSchema = new SimpleSchema({\n    label: {\n        type: String,\n        max: 50,\n        readonly: true\n    },\n    description: {\n        type: String,\n        max: 500,\n        readonly: true\n    }\n} as any);\n\nreturn new SimpleSchema2Bridge(productSchema);\n\n")),Object(i.b)("p",null,"The schema above will enable us to display full product information which cannot be edited thanks to the ",Object(i.b)("inlineCode",{parentName:"p"},"readonly")," property.\nThis is because we do not want a volunteer to modify the product details. Only admin can do so. "),Object(i.b)("h3",{id:"lets-use-it-in-a-component"},"Let's use it in a component!"),Object(i.b)("p",null,"The above schema can be used in any react component as follows."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"import React from 'react';\nimport { AutoForm } from 'uniforms-ionic'\n\nimport productSchema from '../forms/product';\n\nexport default function ProductForm() {\n  const product = {\n      label: \"product label\",\n      description: \"A very long product description\"\n  }; // This information could come from the server e.g via a volunteerAction.products list.   \n  return <AutoForm schema={productSchema} model={product}/>;\n}\n")),Object(i.b)("p",null,"And that's it! ",Object(i.b)("inlineCode",{parentName:"p"},"AutoForm")," will generate a complete form with labeled fields, errors list (if any) and a submit button."),Object(i.b)("p",null,"Also, it will take care of validation and handle model changes."))}m.isMDXComponent=!0}}]);