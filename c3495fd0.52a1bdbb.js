(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{118:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return p}));var o=t(1),a=t(6),r=(t(0),t(126)),i={id:"datamodel",title:"Data Model"},l={id:"datamodel",title:"Data Model",description:"## Customization of OVP server using data model",source:"@site/../docs/graphback_model.md",permalink:"/docs/datamodel",editUrl:"https://github.com/aerogear/OpenVolunteerPlatform/edit/master/website/../docs/graphback_model.md",sidebar:"docs",previous:{title:"Node.js server",permalink:"/docs/serverfullstack"},next:{title:"Out of the box Keycloak based authentication",permalink:"/docs/keycloak-authz"}},c=[{value:"Customization of OVP server using data model",id:"customization-of-ovp-server-using-data-model",children:[]},{value:"Model",id:"model",children:[]},{value:"Relationships",id:"relationships",children:[{value:"OneToMany",id:"onetomany",children:[]},{value:"OneToOne",id:"onetoone",children:[]},{value:"ManyToMany",id:"manytomany",children:[]}]}],d={rightToc:c};function p(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(o.a)({},d,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"customization-of-ovp-server-using-data-model"},"Customization of OVP server using data model"),Object(r.b)("p",null,"OVP processes your data model to generate a server and client side using best patterns for production ready applications and reduces amount of boilerplate code needed to be added by you.\nDevelopers can focus on data and application requirements by modeling them using a GraphQL SDL. You can view your data model in ",Object(r.b)("inlineCode",{parentName:"p"},"./server/model")," folder"),Object(r.b)("h2",{id:"model"},"Model"),Object(r.b)("p",null,"OVP (Graphback) operates on GraphQL Schema types annotated with ",Object(r.b)("inlineCode",{parentName:"p"},"@model"),". Refer to ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://graphback.dev/docs/next/metadata"}),"this")," page for complete documentation of ",Object(r.b)("inlineCode",{parentName:"p"},"@model")," and other annotations.\nAdding this annotation to your type will enable Graphback to add additional elements to the schema and generate related code in JavaScript or TypeScript."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Recipient {\n  ...\n}\n')),Object(r.b)("p",null,"Your data models can also contain custom types that are not Graphback models as shown below."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype VolunteerAction {\n  id: ID!\n  \n  ... \n  """\n  comments section about the delivery, exchanges between volunteer and recipient or administrator.\n  """\n  comments: [VolunteerActionComment]\n}\n\n"""\nA custom type\n"""\ntype VolunteerActionComment {\n  text: String\n  createdAt: DateTime\n}\n')),Object(r.b)("h2",{id:"relationships"},"Relationships"),Object(r.b)("p",null,"Graphback provides support for one-to-many and one-to-one relationships."),Object(r.b)("h3",{id:"onetomany"},"OneToMany"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model(delete: false)\n"""\ntype Volunteer {\n  id: ID!\n \n  ....\n\n  """\n  @oneToMany(field: \'volunteer\')\n  """\n  actions: [VolunteerAction]\n}\n\n"""\nRepresents action that is assigned to volunteer\n\n@model\n"""\ntype VolunteerAction {\n  id: ID!\n  ...\n  """\n  @manyToOne(field: \'actions\', key: \'volunteerId\')\n  """\n  volunteer: Volunteer\n}\n')),Object(r.b)("p",null,"This creates a one-to-many relationship between ",Object(r.b)("inlineCode",{parentName:"p"},"Volunteer.actions")," and ",Object(r.b)("inlineCode",{parentName:"p"},"VolunteerAction.volunteer"),". If ",Object(r.b)("inlineCode",{parentName:"p"},"VolunteerAction.volunteer")," does not exist Graphback will generate it for you, otherwise you can define it yourself."),Object(r.b)("p",null,"By default this maps to ",Object(r.b)("inlineCode",{parentName:"p"},"volunteer.volunteerId")," in the underlying data source. Yon can customise this by adding ",Object(r.b)("inlineCode",{parentName:"p"},"key")," to the ",Object(r.b)("inlineCode",{parentName:"p"},"@oneToMany")," annotation."),Object(r.b)("h3",{id:"onetoone"},"OneToOne"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Profile {\n  id: ID!\n  """\n  @oneToOne\n  """\n  user: User!\n}\n')),Object(r.b)("p",null,"This creates a one-sided relationship between the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," and ",Object(r.b)("inlineCode",{parentName:"p"},"User")," models."),Object(r.b)("p",null,"By default this maps to ",Object(r.b)("inlineCode",{parentName:"p"},"profile.userId")," in the underlying data source. Yon can customise this by adding ",Object(r.b)("inlineCode",{parentName:"p"},"key")," to the ",Object(r.b)("inlineCode",{parentName:"p"},"@oneToOne")," annotation:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-graphql"}),'"""\n@model\n"""\ntype Profile {\n  id: ID!\n  """\n  @oneToOne key: \'user_id\'\n  """\n  user: User!\n}\n')),Object(r.b)("h3",{id:"manytomany"},"ManyToMany"),Object(r.b)("p",null,"To create a many-to-many relationship, add a model for your join table and use two one-to-many relationship mappings to create the relationship."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-graphql"}),'\n"""\n@model\n"""\ntype VolunteerAction {\n  id: ID!\n  \n  ...\n\n  """\n  @oneToMany(field: \'volunteerAction\')\n  """\n  products: [VolunteerActionProduct]\n}\n\n"""\nRepresents a join model between a volunteer action and product\n\n@model\n"""\ntype VolunteerActionProduct {\n  id: ID!\n}\n\n"""\n@model\n"""\ntype Product {\n  id: ID!\n  \n  ... \n  """\n  @oneToMany(field: \'product\')\n  """\n  volunteerActionProducts: [VolunteerActionProduct]\n}\n')))}p.isMDXComponent=!0},126:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return m}));var o=t(0),a=t.n(o);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=a.a.createContext({}),p=function(e){var n=a.a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):l({},n,{},e)),t},s=function(e){var n=p(e.components);return a.a.createElement(d.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},b=Object(o.forwardRef)((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),s=p(t),b=o,m=s["".concat(i,".").concat(b)]||s[b]||u[b]||r;return t?a.a.createElement(m,l({ref:n},d,{components:t})):a.a.createElement(m,l({ref:n},d))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=b;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var d=2;d<r;d++)i[d]=t[d];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);