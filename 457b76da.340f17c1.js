(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{110:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return p}));var a=n(1),r=n(6),i=(n(0),n(126)),l={id:"coding",title:"Running reference application"},c={id:"coding",title:"Running reference application",description:"## Project Structure",source:"@site/../docs/coding.md",permalink:"/docs/coding",editUrl:"https://github.com/aerogear/OpenVolunteerPlatform/edit/master/website/../docs/coding.md",sidebar:"docs",previous:{title:"Getting Started",permalink:"/docs/gettingstartedref"},next:{title:"Mobile and Admin Apps",permalink:"/docs/clientref"}},o=[{value:"Project Structure",id:"project-structure",children:[]},{value:"Getting Started",id:"getting-started",children:[{value:"Running Apps and Server",id:"running-apps-and-server",children:[]},{value:"Technical Details",id:"technical-details",children:[]},{value:"Running Clients as Mobile Applications",id:"running-clients-as-mobile-applications",children:[]}]},{value:"Using MQTT for GraphQL Subscriptions",id:"using-mqtt-for-graphql-subscriptions",children:[{value:"Running On OpenShift",id:"running-on-openshift",children:[]}]},{value:"Development",id:"development",children:[{value:"Executing Graphback source generator",id:"executing-graphback-source-generator",children:[]}]}],b={rightToc:o};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"project-structure"},"Project Structure"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Volunteer Client Application ",Object(i.b)("inlineCode",{parentName:"li"},"/client")),Object(i.b)("li",{parentName:"ul"},"Admin Application ",Object(i.b)("inlineCode",{parentName:"li"},"/client-admin")),Object(i.b)("li",{parentName:"ul"},"Server Application ",Object(i.b)("inlineCode",{parentName:"li"},"/server")),Object(i.b)("li",{parentName:"ul"},"Data Model Representing System API ",Object(i.b)("inlineCode",{parentName:"li"},"./model")),Object(i.b)("li",{parentName:"ul"},"OpenShift Deployment ",Object(i.b)("inlineCode",{parentName:"li"},"./.openshift"))),Object(i.b)("h2",{id:"getting-started"},"Getting Started"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"Running-Apps-and-Server"}),"Running Apps and Server")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"Technical-Details"}),"Technical Details")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"Running-Clients-as-Mobile-Applications"}),"Running Clients as Mobile Applications")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"Using-MQTT-for-GraphQL-Subscriptions"}),"Using MQTT for GraphQL subscriptions")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"Development"}),"Development")," ")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Requirements:")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://nodejs.org/en/download/"}),"Node.js 12.x")," or later version"),Object(i.b)("li",{parentName:"ul"},"Docker and Docker Compose"),Object(i.b)("li",{parentName:"ul"},"Access to a running OpenShift instance (",Object(i.b)("em",{parentName:"li"},"Optional"),")")),Object(i.b)("h3",{id:"running-apps-and-server"},"Running Apps and Server"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Install yarn and project dependencies")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"npm install -g yarn\nyarn\n")),Object(i.b)("ol",{start:2},Object(i.b)("li",{parentName:"ol"},"Build client admin and client ")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"yarn\nyarn prepare:all\n")),Object(i.b)("ol",{start:3},Object(i.b)("li",{parentName:"ol"},"Start the server")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"cd ./server\ndocker-compose up -d\n## Wait at least minute for containers to start\nyarn keycloak:init\nyarn start\n")),Object(i.b)("ol",{start:4},Object(i.b)("li",{parentName:"ol"},"Links to applications should be printed in the console.")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"    \ud83c\udfae Ionic PWA application available at http://localhost:4000\n    \ud83c\udfae Admin PWA application available at http://localhost:4000/admin\n")),Object(i.b)("p",null,"  By default, the two users that can log into the application are created:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"username: ",Object(i.b)("inlineCode",{parentName:"li"},"developer"),"; password: ",Object(i.b)("inlineCode",{parentName:"li"},"developer")),Object(i.b)("li",{parentName:"ul"},"username: ",Object(i.b)("inlineCode",{parentName:"li"},"admin"),"; password: ",Object(i.b)("inlineCode",{parentName:"li"},"admin"),"\nVolunteers can register to the application in the login screen. ")),Object(i.b)("h3",{id:"technical-details"},"Technical Details"),Object(i.b)("h4",{id:"keycloak-integration"},"Keycloak Integration"),Object(i.b)("p",null,"Follow these instructions to set up Keycloak for Authentication/Authorization."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Configure the Keycloak Server"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"cd ./server\nyarn keycloak:init\n")),Object(i.b)("p",{parentName:"li"},"This command creates the necessary resources in Keycloak and prints instructions you must follow to enable the integration.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Follow the printed instructions and copy the JSON configurations to the appropriate locations.\nThe Starter app and server will read these configurations and the integration will be enabled when they are started."))),Object(i.b)("p",null,"Volunteer accounts for logging to voulnteer app that can be used:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-log"}),"hzaub   \nkudi\nmsash\ntgers\ntmaure\nukon\nwtrocki\n")),Object(i.b)("p",null,"Admin application user:"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"ovp-admin")),Object(i.b)("p",null,"The password is the same as the username."),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"NOTE: If you'd like to use demo data users and have them automatically imported in keycloak, run the keycloak init script as below: "),Object(i.b)("pre",{parentName:"blockquote"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-shell"}),"USE_DEMO_DATA=false yarn keycloak:init\n"))),Object(i.b)("p",null,"This command will create the following usernames:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-log"}),"hzaub   \nkudi\nmsash\ntgers\ntmaure\nukon\nwtrocki\n")),Object(i.b)("p",null,"The password is the same as the username."),Object(i.b)("p",null,"You can use these user names to login into the volunteer client application. "),Object(i.b)("h3",{id:"running-clients-as-mobile-applications"},"Running Clients as Mobile Applications"),Object(i.b)("h4",{id:"for-ios"},"For IOS:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"cd ./client\nyarn cap add ios\nyarn run:ios\n")),Object(i.b)("h4",{id:"for-android"},"For Android:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"cd ./client\nyarn cap add android\nyarn run:android\n")),Object(i.b)("p",null,"When running locally you will need to also enable HTTP traffic.\nFor example, for Android add ",Object(i.b)("inlineCode",{parentName:"p"},'android:usesCleartextTraffic#"true"')," to AndroidManifest.xml"),Object(i.b)("p",null,"The project should start in IDE and can be launched as any other native application."),Object(i.b)("h2",{id:"using-mqtt-for-graphql-subscriptions"},"Using MQTT for GraphQL Subscriptions"),Object(i.b)("p",null,"By default, the platform uses an in memory subscription mechanism that is not recommended for production. For OpenShift deployment, the AMQ MQTT protocol is used. On your local machine, this can be configured using the following steps:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Go to server/scripts ./mqtt"),Object(i.b)("li",{parentName:"ol"},"Execute docker-compose"),Object(i.b)("li",{parentName:"ol"},"Set the MQTT_HOST variable in the ",Object(i.b)("inlineCode",{parentName:"li"},".env")," file.\n",Object(i.b)("inlineCode",{parentName:"li"},"MQTT_HOST#127.0.0.1"))),Object(i.b)("h3",{id:"running-on-openshift"},"Running On OpenShift"),Object(i.b)("p",null,"Please check out the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"platform/.openshift/README.md"}),".openshift")," folder for more information."),Object(i.b)("h2",{id:"development"},"Development"),Object(i.b)("p",null,"The Starter template is based on the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://graphback.dev"}),"Graphback")," open source project. Please follow the Graphback ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://graphback.dev/docs/intro/datamodel"}),"Getting Started Guide")," to learn how to modify the Open Volunteer Platform."),Object(i.b)("h3",{id:"executing-graphback-source-generator"},"Executing Graphback source generator"),Object(i.b)("p",null,"The  following command generates client side queries and mutations for the client side:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"yarn generate:all\n")))}p.isMDXComponent=!0},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b=r.a.createContext({}),p=function(e){var t=r.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},s=function(e){var t=p(e.components);return r.a.createElement(b.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,b=o(e,["components","mdxType","originalType","parentName"]),s=p(n),d=a,m=s["".concat(l,".").concat(d)]||s[d]||u[d]||i;return n?r.a.createElement(m,c({ref:t},b,{components:n})):r.a.createElement(m,c({ref:t},b))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:a,l[1]=c;for(var b=2;b<i;b++)l[b]=n[b];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);